<footer class="section section-footer" data-hash="footer" data-toggle-theme="white" style="margin-top: 20px;">
    <div class="container">
        <div class="content">
            <div class="row">
                <div class="col-lg-9 col-md-6 mb-sm-3">
                    <a href="<?php echo home_url(); ?>" class="logo-container">
                        <img src="<?php echo content_url(); ?>/uploads/2020/07/logo-white.svg" class="logo" alt="HoangHo Real Estate Development" />
                    </a>
                    <div class="row">
                        <div class="col-lg-5 mb-sm-3">
                            <p>
                                <strong>CÔNG TY CP PHÁT TRIỂN BẤT ĐỘNG SẢN HOANGHO</strong><br />
                                357-359 An Dương Vương, Phường Chợ Quán, Thành phố Hồ Chí Minh
                            </p>
                        </div>
                        <div class="col-lg-2 mb-sm-3">
                            <p>
                                <strong>Liên hệ</strong><br />
                                <a href="tel:+84 28 3829 9999">+84 28 3829 9999</a>
                            </p>
                        </div>
                        <div class="col-lg-2 mb-sm-3">
                            <p>
                                <strong>Email</strong><br />
                                <a href="mailto:info@hoangho.com.vn">info@hoangho.com.vn</a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <p class="mb-0"><strong>Newsletter</strong></p>
                    <div class="submit-form">
                        <div class="wpcf7 js" id="wpcf7-f4132-o1" lang="vi-VN" dir="ltr" data-wpcf7-id="4132">
                            <div class="screen-reader-response"><p role="status" aria-live="polite" aria-atomic="true"></p> <ul></ul></div>
                            <form action="/#wpcf7-f4132-o1" method="post" class="wpcf7-form init" aria-label="Contact form" novalidate="novalidate" data-status="init" onsubmit="return false;">
                                <fieldset class="hidden-fields-container">
                                    <input type="hidden" name="_wpcf7" value="4132">
                                    <input type="hidden" name="_wpcf7_version" value="6.1.1">
                                    <input type="hidden" name="_wpcf7_locale" value="vi_VN">
                                    <input type="hidden" name="_wpcf7_unit_tag" value="wpcf7-f4132-o1">
                                    <input type="hidden" name="_wpcf7_container_post" value="0">
                                    <input type="hidden" name="_wpcf7_posted_data_hash" value="">
                                </fieldset>
                                <div class="group-input">
                                    <p>
                                        <span class="wpcf7-form-control-wrap" data-name="your-email">
                                            <input size="40" maxlength="400" class="wpcf7-form-control wpcf7-email wpcf7-validates-as-required wpcf7-text wpcf7-validates-as-email input" autocomplete="email" aria-required="true" aria-invalid="false" placeholder="Sign up for keeping in touch to us" value="" type="email" name="your-email" id="newsletter-email">
                                        </span>
                                        <button class="btn-submit wpcf7-form-control wpcf7-submit" type="button" id="newsletter-submit-btn">
                                            <img src="https://filmore.com.vn/wp-content/themes/filmore/assets/images/icons/next.svg" data-lazy-src="https://filmore.com.vn/wp-content/themes/filmore/assets/images/icons/next.svg" data-ll-status="loaded" class="entered lazyloaded">
                                            <noscript><img src="https://filmore.com.vn/wp-content/themes/filmore/assets/images/icons/next.svg" /></noscript>
                                        </button>
                                    </p>
                                </div>
                                <p style="display: none !important;" class="akismet-fields-container" data-prefix="_wpcf7_ak_">
                                    <label>Δ<textarea name="_wpcf7_ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label>
                                    <input type="hidden" id="ak_js_1" name="_wpcf7_ak_js" value="1757520921941">
                                    <script>document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script>
                                </p>
                                <div class="wpcf7-response-output" aria-hidden="true"></div>
                            </form>
                        </div>
                    </div>
                    <style>
                    /* INLINE CSS - ULTRA HIGH PRIORITY */
                    
                    /* Footer font size and family adjustments for each section */
                    .section-footer { 
                        font-size: 12px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer p { 
                        font-size: 12px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer strong { 
                        font-size: 13px !important; 
                        font-weight: 500 !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer .logo-container { 
                        font-size: 14px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer .copyright { 
                        font-size: 11px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer .list-term .item a { 
                        font-size: 11px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer .languages li a { 
                        font-size: 12px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    .section-footer .flex-1 { 
                        font-size: 12px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important; 
                    }
                    
                    .submit-form .wpcf7 { margin: 0 !important; padding: 0 !important; }
                    .submit-form .wpcf7-form { margin: 0 !important; padding: 0 !important; }
                    .submit-form .group-input { display: block !important; }
                    .submit-form .group-input p { position: relative !important; margin: 0 !important; display: flex !important; align-items: center !important; }
                    .submit-form .wpcf7-form-control-wrap { position: relative !important; margin: 0 !important; flex: 1 !important; }
                    .submit-form .wpcf7-form-control-wrap input[type="email"] { 
                        width: 100% !important; 
                        padding: 0 !important; 
                        border: none !important; 
                        border-bottom: 1px solid #fff !important; 
                        border-radius: 0 !important; 
                        font-size: 14px !important; 
                        font-family: 'HoangHoGotham', sans-serif !important;
                        background: transparent !important; 
                        color: #fff !important; 
                        outline: none !important; 
                        transition: border-color 0.3s ease !important; 
                        box-sizing: border-box !important; 
                        margin: 0 !important; 
                        height: 30px !important;
                    }
                    .submit-form .wpcf7-form-control-wrap input[type="email"]:focus { border-bottom-color: #007cba !important; }
                    .submit-form .wpcf7-form-control-wrap input[type="email"]::placeholder { color: #ccc !important; font-style: normal !important; font-family: 'HoangHoGotham', sans-serif !important; font-size: 12px !important; }
                    .submit-form .btn-submit { 
                        position: absolute !important; 
                        right: 0 !important; 
                        top: 50% !important; 
                        transform: translateY(-50%) !important; 
                        width: 25px !important; 
                        height: 25px !important; 
                        background: none !important; 
                        border: none !important; 
                        cursor: pointer !important; 
                        padding: 0 !important; 
                        margin: 0 !important; 
                        display: flex !important; 
                        align-items: center !important; 
                        justify-content: center !important; 
                        visibility: visible !important;
                        opacity: 1 !important;
                        z-index: 999 !important;
                    }
                    .submit-form .btn-submit img { 
                        width: 16px !important; 
                        height: 16px !important; 
                        object-fit: contain !important; 
                        display: block !important;
                        visibility: visible !important;
                        opacity: 1 !important;
                    }
                    .submit-form .hidden-fields-container, .submit-form .akismet-fields-container, .submit-form .screen-reader-response { display: none !important; }
                    /* Force button to be visible */
                    .submit-form .wpcf7-submit, .submit-form .wpcf7-form-control.wpcf7-submit { display: flex !important; visibility: visible !important; opacity: 1 !important; }
                    .submit-form .wpcf7-response-output { margin-top: 10px !important; padding: 10px !important; border-radius: 4px !important; font-size: 14px !important; }
                    .submit-form .wpcf7-response-output.wpcf7-mail-sent-ok { background-color: #d4edda !important; color: #155724 !important; border: 1px solid #c3e6cb !important; }
                    .submit-form .wpcf7-response-output.wpcf7-validation-errors, .submit-form .wpcf7-response-output.wpcf7-mail-sent-ng { background-color: #f8d7da !important; color: #721c24 !important; border: 1px solid #f5c6cb !important; }
                    </style>
                   <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        // Handle Contact Form 7 newsletter form submission
                        const wpcf7Form = document.querySelector('.submit-form .wpcf7-form');
                        const emailInput = document.getElementById('newsletter-email');
                        const messageDiv = document.querySelector('.wpcf7-response-output');
                        const submitBtn = document.getElementById('newsletter-submit-btn');
                        
                        console.log('Form elements found:', {
                            form: wpcf7Form,
                            emailInput: emailInput,
                            messageDiv: messageDiv,
                            submitBtn: submitBtn
                        });
                        
                        // Function to handle form submission
                        function handleNewsletterSubmit() {
                            const email = emailInput.value.trim();
                            console.log('Email value:', email);
                            
                            if (!email || !isValidEmail(email)) {
                                showMessage('Vui lòng nhập email hợp lệ', 'error');
                                return false;
                            }
                            
                            // Disable form and show loading
                            emailInput.disabled = true;
                            emailInput.style.opacity = '0.6';
                            if (submitBtn) {
                                submitBtn.disabled = true;
                                submitBtn.style.opacity = '0.6';
                                // Keep the arrow icon, don't change text
                            }
                            
                            console.log('Sending AJAX request...');
                            
                            // Send AJAX request to our custom handler
                            fetch('<?php echo admin_url('admin-ajax.php'); ?>', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/x-www-form-urlencoded',
                                },
                                body: new URLSearchParams({
                                    action: 'newsletter_signup',
                                    email: email,
                                    nonce: '<?php echo wp_create_nonce('newsletter_signup_nonce'); ?>',
                                    source: 'footer'
                                })
                            })
                            .then(response => {
                                console.log('Response received:', response);
                                return response.json();
                            })
                            .then(data => {
                                console.log('Response data:', data);
                                if (data.success) {
                                    showMessage(data.data, 'success');
                                    emailInput.value = '';
                                } else {
                                    showMessage(data.data, 'error');
                                }
                            })
                            .catch(error => {
                                console.error('AJAX error:', error);
                                showMessage('Có lỗi xảy ra. Vui lòng thử lại sau.', 'error');
                            })
                            .finally(() => {
                                // Re-enable form
                                emailInput.disabled = false;
                                emailInput.style.opacity = '1';
                                if (submitBtn) {
                                    submitBtn.disabled = false;
                                    submitBtn.style.opacity = '1';
                                    // Keep the arrow icon, don't change text
                                }
                            });
                            
                            return false;
                        }
                        
                        if (wpcf7Form && emailInput) {
                            // Prevent form default submission
                            wpcf7Form.addEventListener('submit', function(e) {
                                console.log('Form submitted, preventing default');
                                e.preventDefault();
                                e.stopPropagation();
                                return handleNewsletterSubmit();
                            });
                            
                            // Also handle Enter key press
                            emailInput.addEventListener('keypress', function(e) {
                                if (e.key === 'Enter') {
                                    console.log('Enter key pressed');
                                    e.preventDefault();
                                    e.stopPropagation();
                                    return handleNewsletterSubmit();
                                }
                            });
                        }
                        
                        // Add click handler to submit button
                        if (submitBtn) {
                            submitBtn.addEventListener('click', function(e) {
                                console.log('Submit button clicked');
                                e.preventDefault();
                                e.stopPropagation();
                                return handleNewsletterSubmit();
                            });
                        }
                        
                        // Add click handler to email input area
                        const emailArea = document.querySelector('.submit-form .wpcf7-form-control-wrap');
                        if (emailArea) {
                            emailArea.addEventListener('click', function(e) {
                                if (e.target === emailArea || e.target.tagName === 'SPAN') {
                                    const emailInput = emailArea.querySelector('input[type="email"]');
                                    if (emailInput) {
                                        emailInput.focus();
                                    }
                                }
                            });
                        }
                        
                        function showMessage(message, type) {
                            console.log('Showing message:', message, type);
                            if (!messageDiv) return;
                            
                            messageDiv.textContent = message;
                            messageDiv.className = 'wpcf7-response-output';
                            
                            if (type === 'success') {
                                messageDiv.classList.add('wpcf7-mail-sent-ok');
                                messageDiv.classList.remove('wpcf7-validation-errors', 'wpcf7-mail-sent-ng');
                            } else {
                                messageDiv.classList.add('wpcf7-validation-errors');
                                messageDiv.classList.remove('wpcf7-mail-sent-ok', 'wpcf7-mail-sent-ng');
                            }
                            
                            messageDiv.style.display = 'block';
                            messageDiv.setAttribute('aria-hidden', 'false');
                            
                            if (type === 'success') {
                                setTimeout(() => {
                                    messageDiv.style.display = 'none';
                                    messageDiv.setAttribute('aria-hidden', 'true');
                                }, 2000);
                            }
                        }
                        
                        function isValidEmail(email) {
                            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                            return emailRegex.test(email);
                        }
                    });
                    </script>
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <div class="flex-1 mb-3">Contact with Us</div>
                            <ul class="socials">
                                <li>
                                    <a href="https://www.facebook.com/hoangho.com.vn" target="_blank">
                                        <img src="<?php echo get_template_directory_uri(); ?>/assets/images/icons/facebook.svg" class="icon" alt="Facebook" />
                                    </a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/channel/UCw9-B1nbvn8u-131PPSki_g" target="_blank">
                                        <img src="<?php echo get_template_directory_uri(); ?>/assets/images/icons/youtube.svg" class="icon" alt="YouTube" />
                                    </a>
                                </li>
                                <li>
                                    <a href="https://www.linkedin.com/company/30943257" target="_blank">
                                        <img src="<?php echo get_template_directory_uri(); ?>/assets/images/icons/linkedin.svg" class="icon" alt="LinkedIn" />
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <div class="flex-1 mb-3">Language</div>
                            <div class="language text-right">
                                <ul class="languages">
                                    <li class="<?php echo (is_page('en') || get_query_var('pagename') == 'en') ? '' : 'active'; ?>">
                                        <a href="<?php echo home_url(); ?>">VI</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li class="<?php echo (is_page('en') || get_query_var('pagename') == 'en') ? 'active' : ''; ?>">
                                        <a href="<?php echo home_url('/en'); ?>">EN</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="divider"></div>
            <div class="d-block d-md-flex justify-content-between">
                <div class="list-term mb-md-0 mb-3">
                    <div class="item">
                        <a href="<?php echo home_url(); ?>/chinh-sach-bao-mat"><i class="fas fa-angle-double-right"></i> CHÍNH SÁCH BẢO MẬT</a>
                    </div>
                    <div class="item">
                        <a href="<?php echo home_url(); ?>/mien-tru-trach-nhiem"><i class="fas fa-angle-double-right"></i> MIỄN TRỪ TRÁCH NHIỆM</a>
                    </div>
                    <div class="item">
                        <a href="<?php echo home_url(); ?>/quy-dinh-ve-quyen-rieng-tu"><i class="fas fa-angle-double-right"></i> QUY ĐỊNH VỀ QUYỀN RIÊNG TƯ</a>
                    </div>
                </div>
                <div class="copyright text-right">
                    © Copyright 2020 HoangHo Real Estate Development<br>
                    <a href="#">
                        <img style="width: 100px; margin-top: 10px;" src="<?php echo get_template_directory_uri(); ?>/assets/images/bo-cong-thuong.png" alt="Bộ Công Thương" />
                    </a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Scripts are loaded via wp_enqueue_scripts in functions.php -->

<?php wp_footer(); ?>

</body>
</html>